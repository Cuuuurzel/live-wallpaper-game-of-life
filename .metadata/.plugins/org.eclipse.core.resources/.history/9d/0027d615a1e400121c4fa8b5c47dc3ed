package com.cuuuurzel.gollivewallpaper;

import java.io.File;
import java.io.FileInputStream;
import java.io.IOException;
import java.io.ObjectInputStream;

import android.app.Activity;
import android.content.Intent;
import android.os.Bundle;
import android.os.Environment;
import android.view.View;
import android.widget.TextView;

public class GolSettings extends Activity {

	int rows, cols;

	@Override
	protected void onCreate(Bundle savedInstanceState) {
		super.onCreate(savedInstanceState);
		setContentView(R.layout.settings);
		File inf = new File(Environment.getExternalStorageDirectory(), GolSettingsGrid.path );
		try {
			ObjectInputStream in = new ObjectInputStream( new FileInputStream( inf ) );
			this.rows = in.readInt();
			this.cols = in.readInt();
			in.close();
		} catch ( IOException e ) {
			rows = 10; cols = 6;
		}
		setLabelText();
	}

	public void incRows(View v) {
		this.rows++;
		setLabelText();
	}

	public void incCols(View v) {
		this.cols++;
		setLabelText();
	}

	public void decRows(View v) {
		if (rows > 10) {
			this.rows--;
		}
		setLabelText();
	}

	public void decCols(View v) {
		if (cols > 6) {
			this.cols--;
		}
		setLabelText();
	}

	public void setLabelText() {
		TextView l = (TextView) findViewById(R.id.txvGridSize);
		l.setText(rows + " x " + cols);
	}

	public void showGrid(View v) {
		Intent intentMain = new Intent(GolSettings.this, GolSettingsGrid.class);
		intentMain.putInt( "rows", rows );
		intentMain.putInt( "cols", cols );
		GolSettings.this.startActivityForResult( intentMain, 1 );
	}
}